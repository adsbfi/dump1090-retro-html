# Allows access to the static files that provide the dump1090 map view,
# and also to the dynamically-generated json parts that contain aircraft
# data and are periodically written by the dump1090 daemon.

alias.url += (
  "/dump1090/data/" => "/run/dump1090-fa/",
  "/dump1090/" => "/usr/local/share/dump1090-retro-html/",
)

# redirect the slash-less URL
url.redirect += (
  "^/dump1090$" => "/dump1090/",
  "^/dump1090/gmap.html$" => "/dump1090/",
)

# Add CORS header
$HTTP["url"] =~ "^/dump1090/data/.*\.json$" {
  setenv.add-response-header = ( "Access-Control-Allow-Origin" => "*" ),
}
